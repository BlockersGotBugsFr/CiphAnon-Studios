<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>CiphAnon Studios — Home</title>
<meta name="description" content="CiphAnon Studios — prototypes, tools and interactive experiences. 3 years practical experience." />
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
<style>
  /* =========================
     Theme / Reset
     ========================= */
  :root{
    --bg-1:#041018; --bg-2:#071523;
    --muted:#9fb0c6; --panel:#0d1722;
    --accent-a:#ff9f1c; --accent-b:#ff5e7a;
    --glass: rgba(255,255,255,0.03);
    --maxw:1220px; --radius:14px; --ease:cubic-bezier(.2,.9,.3,1);
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;
    background: linear-gradient(180deg,var(--bg-1),var(--bg-2));
    color:#e9f6ff;
    -webkit-font-smoothing:antialiased;
    line-height:1.45;
    scroll-behavior:smooth;
  }
  img{display:block;max-width:100%}
  a{color:inherit}
  .container{max-width:var(--maxw);margin:0 auto;padding:20px}

  /* =========================
     Header / Nav
     ========================= */
  header{position:sticky;top:12px;z-index:120;padding:10px 0}
  .nav{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:10px;border-radius:12px;background:linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));box-shadow:0 8px 30px rgba(2,6,12,0.45)}
  .brand{display:flex;align-items:center;gap:12px}
  .logo{width:48px;height:48px;border-radius:10px;object-fit:contain}
  .brand h1{font-size:16px;margin:0}
  nav.links{display:flex;gap:12px;align-items:center}
  nav.links a{color:var(--muted);padding:6px 8px;border-radius:8px;font-weight:700}
  .actions{display:flex;gap:8px}
  .btn{background:linear-gradient(90deg,var(--accent-a),var(--accent-b));color:#041018;padding:10px 14px;border-radius:10px;font-weight:800;border:0;cursor:pointer}
  .btn.secondary{background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--muted);font-weight:700}
  .btn:focus{outline:3px solid rgba(255,159,28,0.12);outline-offset:3px}

  /* =========================
     HERO (big & bold)
     ========================= */
  .hero{display:grid;grid-template-columns:1fr 520px;gap:32px;align-items:center;padding:56px 0}
  .hero-left h1{font-size:44px;margin:0;line-height:1.02}
  .accent-text{background:linear-gradient(90deg,var(--accent-a),var(--accent-b));-webkit-background-clip:text;background-clip:text;color:transparent}
  .lead{color:var(--muted);margin-top:12px;font-size:1.05rem;max-width:64ch}
  .hero-ctas{display:flex;gap:12px;margin-top:18px;flex-wrap:wrap}
  .badges{display:flex;gap:10px;flex-wrap:wrap;margin-top:16px}
  .badge{background:var(--glass);padding:8px 12px;border-radius:999px;color:var(--muted);font-weight:700;border:1px solid rgba(255,255,255,0.03)}

  /* hero visual frame */
  .hero-frame{
    height:460px;border-radius:16px;padding:14px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));
    position:relative;box-shadow:0 30px 90px rgba(2,6,12,0.65);overflow:hidden;contain:layout paint;
  }
  /* animated gradient overlay (cheap) */
  .grad-overlay{position:absolute;inset: -20% -10% auto auto;width:560px;height:560px;border-radius:30%;filter:blur(60px);opacity:0.18;background:linear-gradient(120deg,var(--accent-a),var(--accent-b));transform:translate3d(0,0,0)}
  /* floating project preview cards inside hero */
  .hero-cards{position:absolute;left:18px;bottom:22px;display:flex;gap:12px}
  .mini-card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:10px;border-radius:12px;box-shadow:0 10px 30px rgba(2,6,12,0.45);font-weight:700;color:#fff;min-width:120px;transform-origin:center;transition:transform .2s var(--ease)}

  /* character container w/ parallax & bob */
  .char-wrap{position:absolute;right:18px;bottom:18px;width:300px;max-width:44%;transform-origin:center;will-change:transform;pointer-events:none}
  .char{width:100%;display:block;filter:drop-shadow(0 20px 30px rgba(2,6,12,0.6));transform-origin:center}
  .bob{animation:bob 5.6s ease-in-out infinite}
  @keyframes bob{0%{transform:translateY(0)}50%{transform:translateY(-8px)}100%{transform:translateY(0)}}

  /* =========================
     KEY INFO STRIP (trust / stats)
     ========================= */
  .info-strip{display:flex;gap:12px;margin-top:20px;align-items:center;flex-wrap:wrap}
  .info-box{background:linear-gradient(90deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));padding:10px;border-radius:10px;display:flex;gap:12px;align-items:center}
  .info-box .num{font-weight:900;font-size:18px}
  .trust-logos{display:flex;gap:12px;align-items:center;opacity:0.9}

  /* =========================
     FEATURES / SERVICES
     ========================= */
  .features{display:grid;grid-template-columns:repeat(3,1fr);gap:16px;margin-top:26px}
  .feature{background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));padding:16px;border-radius:12px;box-shadow:0 10px 30px rgba(2,6,12,0.35);transition:transform .22s var(--ease);contain:paint}
  .feature:hover{transform:translateY(-8px)}
  .feature h3{margin:0 0 8px}
  .feature p{color:var(--muted);margin:0}

  /* =========================
     PROJECT CAROUSEL + modal
     ========================= */
  .carousel{display:flex;gap:14px;overflow:auto;padding:12px 6px;scroll-snap-type:x mandatory; -webkit-overflow-scrolling:touch;contain:layout paint}
  .project{flex:0 0 320px;min-width:260px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));border-radius:12px;padding:14px;box-shadow:0 10px 30px rgba(2,6,12,0.36);scroll-snap-align:start;cursor:pointer;transition:transform .18s}
  .project:hover{transform:translateY(-10px)}
  .project h4{margin:0 0 8px}
  .project p{color:var(--muted);margin:0 0 10px}
  .tags{display:flex;gap:8px;flex-wrap:wrap}
  .tag{font-size:12px;padding:6px 9px;border-radius:999px;background:rgba(255,255,255,0.02);color:var(--muted);font-weight:700}

  .modal-backdrop{position:fixed;inset:0;background:rgba(2,6,12,0.7);display:none;align-items:center;justify-content:center;z-index:260}
  .modal{background:var(--panel);border-radius:12px;padding:18px;max-width:920px;width:calc(100% - 40px);box-shadow:0 20px 60px rgba(2,6,12,0.8);max-height:90vh;overflow:auto}

  /* =========================
     TESTIMONIALS (auto-scroll)
     ========================= */
  .testimonials{display:flex;gap:12px;overflow:auto;padding:8px 0;scroll-snap-type:x mandatory}
  .test{flex:0 0 300px;min-width:240px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));padding:14px;border-radius:12px;box-shadow:0 10px 22px rgba(2,6,12,0.34);scroll-snap-align:start}
  .test p{color:var(--muted);margin:0 0 8px}

  /* =========================
     GALLERY (hover parallax)
     ========================= */
  .gallery{display:grid;grid-template-columns:repeat(3,1fr);gap:14px;margin-top:20px}
  .g-card{background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent);border-radius:12px;padding:12px;overflow:hidden;position:relative;cursor:pointer;contain:paint}
  .g-thumb{width:100%;height:160px;background:#081018;border-radius:10px;display:block;object-fit:cover;transition:transform .35s var(--ease);will-change:transform}
  .g-meta{margin-top:10px;color:var(--muted);font-size:13px}

  /* =========================
     MARQUEE (logos)
     ========================= */
  .marquee{display:flex;gap:20px;align-items:center;overflow:hidden;padding:14px 0}
  .marquee-inner{display:flex;gap:28px;animation:marq 16s linear infinite}
  @keyframes marq{0%{transform:translateX(0)}100%{transform:translateX(-50%)}}
  .logo-small{width:84px;height:40px;object-fit:contain;opacity:0.85;filter:grayscale(0.2) contrast(0.9)}

  /* =========================
     COUNTERS, FAQ, CTA, FOOTER
     ========================= */
  .counters{display:flex;gap:12px;margin-top:14px}
  .counter{background:linear-gradient(90deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));padding:10px;border-radius:10px;min-width:110px;text-align:center}
  .faq{margin-top:22px}
  .faq-item{background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent);border-radius:10px;margin-bottom:8px;overflow:hidden}
  .faq-head{display:flex;justify-content:space-between;align-items:center;padding:12px;cursor:pointer}
  .faq-body{padding:12px;color:var(--muted);display:none}
  .cta{margin-top:28px;padding:14px;border-radius:12px;background:linear-gradient(90deg, rgba(255,159,28,0.06), rgba(255,94,122,0.03));display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap}

  footer{margin-top:36px;padding:28px 0;border-top:1px solid rgba(255,255,255,0.02);color:var(--muted)}
  .footer-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:12px}

  /* reveal helper */
  .reveal{opacity:0;transform:translateY(16px);transition:opacity .55s var(--ease),transform .55s var(--ease)}
  .reveal.show{opacity:1;transform:none}
  @media (prefers-reduced-motion: reduce){
    .bob,.grad-overlay,.marquee-inner{animation:none !important}
  }

  /* responsive */
  @media (max-width:1080px){.hero{grid-template-columns:1fr 360px}.features{grid-template-columns:repeat(2,1fr)}.gallery{grid-template-columns:repeat(2,1fr)}.footer-grid{grid-template-columns:repeat(2,1fr)}}
  @media (max-width:720px){.hero{grid-template-columns:1fr}.hero-frame{height:360px}.gallery{grid-template-columns:1fr}.char-wrap{display:none}}
  @media (max-width:420px){.hero-left h1{font-size:28px}}
</style>
</head>
<body>

<header>
  <div class="container nav" role="navigation" aria-label="Main navigation">
    <div class="brand">
      <!-- EDIT: replace with your logo -->
      <img src="assets/logo.png" alt="CiphAnon logo" class="logo" loading="lazy" />
      <div>
        <h1>CiphAnon Studios</h1>
        <div style="font-size:12px;color:var(--muted)">Prototypes • Tools • UX</div>
      </div>
    </div>

    <nav class="links" aria-label="Primary links">
      <a href="#projects">Work</a>
      <a href="#features">Services</a>
      <a href="#about">About</a>
      <a href="#contact">Contact</a>
    </nav>

    <div class="actions">
      <a class="btn secondary" href="https://github.com/your-username" target="_blank" rel="noopener">GitHub</a>
      <a class="btn" href="#contact">Hire</a>
    </div>
  </div>
</header>

<main class="container" id="top">

  <!-- HERO -->
  <section class="hero" aria-labelledby="hero-title">
    <div class="hero-left">
      <h1 id="hero-title"><span class="accent-text">CiphAnon Studios</span> — prototypes & polished tooling.</h1>
      <p class="lead">3 years of hands-on experience across HTML, CSS, JavaScript, Godot, Lua, Java, Unity, Block Code, and Python. I build fast playable prototypes, clean tooling, and delightful UX systems.</p>

      <div class="hero-ctas">
        <a class="btn" href="#projects">See Projects</a>
        <a class="btn secondary" href="#about">About</a>
      </div>

      <div class="badges" aria-hidden="true">
        <div class="badge">Prototyping</div>
        <div class="badge">Tooling</div>
        <div class="badge">UX Systems</div>
      </div>

      <div class="info-strip" aria-hidden="true">
        <div class="info-box"><div class="num">3</div><div style="font-size:12px;color:var(--muted)">Years coding</div></div>
        <div class="info-box"><div class="num">9+</div><div style="font-size:12px;color:var(--muted)">Languages & engines</div></div>
        <div class="info-box"><div class="num">10+</div><div style="font-size:12px;color:var(--muted)">Playables & tools</div></div>
        <div style="margin-left:auto" class="trust-logos" aria-hidden="true">
          <!-- small placeholders; replace with real logos if you want -->
          <img src="assets/logo.png" alt="logo" class="logo-small" loading="lazy" />
          <img src="assets/logo.png" alt="logo" class="logo-small" loading="lazy" />
        </div>
      </div>
    </div>

    <div class="hero-frame reveal" aria-hidden="true">
      <div class="grad-overlay" aria-hidden="true"></div>

      <!-- floating preview mini cards -->
      <div class="hero-cards" aria-hidden="true">
        <div class="mini-card">App Dashboard</div>
        <div class="mini-card">Design System</div>
        <div class="mini-card">Game UI</div>
      </div>

      <!-- character: parallax + bob (no full spin) -->
      <div class="char-wrap bob" id="charWrap" aria-hidden="false">
        <!-- EDIT: replace with your character -->
        <img src="assets/char.png" alt="CiphAnon character" class="char" loading="lazy" />
      </div>
    </div>
  </section>

  <!-- FEATURES -->
  <section id="features" class="features reveal" aria-labelledby="features-title">
    <h2 id="features-title" style="grid-column:1/-1;margin:0 0 12px">Core Services</h2>

    <div class="feature">
      <h3>Rapid Prototyping</h3>
      <p>Playable prototypes that validate mechanics and feel — fast iteration, clear feedback.</p>
    </div>

    <div class="feature">
      <h3>Developer Tooling</h3>
      <p>Small, robust tools and automation scripts to speed up build and deploy workflows.</p>
    </div>

    <div class="feature">
      <h3>UX & Interaction</h3>
      <p>Design systems and front-end architecture with performance and accessibility in mind.</p>
    </div>
  </section>

  <!-- PROJECT CAROUSEL -->
  <section id="projects" class="reveal" aria-labelledby="projects-title" style="margin-top:26px">
    <h2 id="projects-title" style="margin:0 0 12px">Featured Projects</h2>

    <div class="carousel" role="list" aria-label="Featured projects" tabindex="0">
      <!-- Project cards: add or duplicate as desired -->
      <article class="project" role="listitem" tabindex="0"
               data-proj='{"title":"Pet-clicker Prototype","desc":"Collect, upgrade, and polish feedback loops — Godot prototype with web demo.","tags":["Godot","Prototype"],"details":"Playable prototype focused on core loop, balancing, and polish."}'>
        <h4>Pet-clicker Prototype</h4>
        <p>Collectible pets, upgrades, and mutation mechanics.</p>
        <div class="tags"><span class="tag">Godot</span><span class="tag">JavaScript</span></div>
      </article>

      <article class="project" role="listitem" tabindex="0"
               data-proj='{"title":"Landing + Toolkit","desc":"Responsive marketing landing and small JS tooling for deploy previews.","tags":["HTML","JS"],"details":"Landing + automation tooling to speed demos."}'>
        <h4>Landing + Toolkit</h4>
        <p>Responsive landing and deploy helper scripts.</p>
        <div class="tags"><span class="tag">HTML</span><span class="tag">GitHub Pages</span></div>
      </article>

      <article class="project" role="listitem" tabindex="0"
               data-proj='{"title":"Dev Helpers","desc":"Python & Java utilities to speed repetitive build steps.","tags":["Python","Java"],"details":"Small documented utilities to improve productivity."}'>
        <h4>Dev Helpers</h4>
        <p>Automation scripts and packaging helpers.</p>
        <div class="tags"><span class="tag">Python</span><span class="tag">Java</span></div>
      </article>

      <!-- duplicate more projects as needed -->
    </div>

    <div style="margin-top:10px;display:flex;gap:8px;align-items:center">
      <button id="prevProj" class="btn secondary" aria-label="Previous project">← Prev</button>
      <button id="nextProj" class="btn secondary" aria-label="Next project">Next →</button>
      <div style="margin-left:auto;color:var(--muted);font-size:13px">Tip: use arrow keys to navigate</div>
    </div>
  </section>

  <!-- GALLERY (hover parallax) -->
  <section class="reveal" style="margin-top:26px">
    <h3 style="margin:0 0 10px">Playables & Demos</h3>
    <div class="gallery" id="gallery">
      <div class="g-card" tabindex="0" data-thumb="assets/proj1.png">
        <img src="assets/proj1.png" alt="" class="g-thumb" loading="lazy" onerror="this.style.background='#081018'" />
        <div class="g-meta"><div style="font-weight:800">Pet Clicker</div><div style="color:var(--muted)">Prototype • Godot</div></div>
      </div>

      <div class="g-card" tabindex="0" data-thumb="assets/proj2.png">
        <img src="assets/proj2.png" alt="" class="g-thumb" loading="lazy" onerror="this.style.background='#081018'" />
        <div class="g-meta"><div style="font-weight:800">Landing Toolkit</div><div style="color:var(--muted)">Web • Tools</div></div>
      </div>

      <div class="g-card" tabindex="0" data-thumb="assets/proj3.png">
        <img src="assets/proj3.png" alt="" class="g-thumb" loading="lazy" onerror="this.style.background='#081018'" />
        <div class="g-meta"><div style="font-weight:800">Dev Helpers</div><div style="color:var(--muted)">Python • Java</div></div>
      </div>
    </div>
  </section>

  <!-- TESTIMONIALS -->
  <section class="reveal" style="margin-top:28px">
    <h3 style="margin:0 0 10px">Testimonials</h3>
    <div class="testimonials" role="list" aria-label="Testimonials">
      <div class="test" role="listitem">
        <p>"Delivered a polished playable in record time — the feel was excellent."</p>
        <strong>— Alex P.</strong>
      </div>
      <div class="test" role="listitem">
        <p>"Pragmatic tooling that kept our team moving."</p>
        <strong>— Sam M.</strong>
      </div>
      <div class="test" role="listitem">
        <p>"Great communication and clean code."</p>
        <strong>— Rina T.</strong>
      </div>
    </div>
  </section>

  <!-- MARQUEE LOGOS -->
  <section class="reveal" style="margin-top:26px">
    <h4 style="margin:0 0 8px">Built with / Featured on</h4>
    <div class="marquee" aria-hidden="true">
      <div class="marquee-inner" id="marqInner">
        <img src="assets/logo.png" alt="logo" class="logo-small" loading="lazy" />
        <img src="assets/logo.png" alt="logo" class="logo-small" loading="lazy" />
        <img src="assets/logo.png" alt="logo" class="logo-small" loading="lazy" />
        <img src="assets/logo.png" alt="logo" class="logo-small" loading="lazy" />
        <!-- duplicated to make loop -->
        <img src="assets/logo.png" alt="logo" class="logo-small" loading="lazy" />
        <img src="assets/logo.png" alt="logo" class="logo-small" loading="lazy" />
        <img src="assets/logo.png" alt="logo" class="logo-small" loading="lazy" />
        <img src="assets/logo.png" alt="logo" class="logo-small" loading="lazy" />
      </div>
    </div>
  </section>

  <!-- NEWSLETTER + FAQ -->
  <section class="reveal" style="margin-top:28px;display:flex;gap:18px;flex-wrap:wrap;align-items:center">
    <div style="flex:1;min-width:220px">
      <h3 style="margin:0 0 8px">Newsletter</h3>
      <p style="color:var(--muted);margin:0 0 10px">Monthly notes on prototypes, demos and dev tips — no spam.</p>
      <form id="newsForm" onsubmit="event.preventDefault(); subscribe();" aria-label="Subscribe to newsletter" style="display:flex;gap:8px">
        <input class="input" id="email" name="email" type="email" placeholder="you@email.com" required style="padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit" />
        <button class="btn" type="submit">Subscribe</button>
      </form>
      <div id="newsMsg" style="margin-top:8px;color:var(--muted);font-size:13px"></div>
    </div>

    <div style="min-width:340px" id="faqRoot">
      <h3 style="margin:0 0 8px">FAQ</h3>

      <div class="faq">
        <div class="faq-item">
          <div class="faq-head" tabindex="0"><div>Where can I find full code samples?</div><div aria-hidden="true">▾</div></div>
          <div class="faq-body">Project pages link to docs and source when available. See Work → Project → Docs for details.</div>
        </div>

        <div class="faq-item">
          <div class="faq-head" tabindex="0"><div>How do I request a prototype?</div><div aria-hidden="true">▾</div></div>
          <div class="faq-body">Email with a short brief (scope, timeline, target platform) and I'll reply with availability and an estimate.</div>
        </div>
      </div>
    </div>
  </section>

  <!-- CTA -->
  <div class="cta reveal" style="margin-top:28px">
    <div>
      <strong>Want a prototype built fast?</strong>
      <div style="color:var(--muted)">I ship playable demos, tooling and design systems — production-minded.</div>
    </div>
    <div style="display:flex;gap:10px">
      <a class="btn" href="#contact">Request Quote</a>
      <a class="btn secondary" href="mailto:example@email.com">Email</a>
    </div>
  </div>

  <!-- ABOUT / CONTACT teaser -->
  <section id="about" class="reveal" style="margin-top:30px;display:flex;gap:18px;flex-wrap:wrap">
    <div style="flex:1;min-width:220px">
      <h3 style="margin:0 0 8px">About</h3>
      <p style="color:var(--muted);margin:0">3 years practical experience across web and game engines. Full CV & team info on About page.</p>
    </div>

    <div style="width:320px" id="contact">
      <div style="background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.01));padding:12px;border-radius:10px">
        <h3 style="margin:0 0 6px">Contact</h3>
        <p style="color:var(--muted);margin:0 0 10px">For demos, collabs, or code samples — reach out with a short brief.</p>
        <a class="btn" href="mailto:example@email.com">Email Me</a>
      </div>
    </div>
  </section>

</main>

<!-- Footer -->
<footer>
  <div class="container">
    <div class="footer-grid">
      <div>
        <strong>CiphAnon Studios</strong>
        <div style="color:var(--muted);margin-top:8px">Interactive prototypes • developer tooling • UX systems</div>
      </div>

      <div>
        <h4 style="margin:0 0 8px">Work</h4>
        <a href="#projects">Featured</a>
        <a href="/projects">All Projects</a>
        <a href="/docs">Docs</a>
      </div>

      <div>
        <h4 style="margin:0 0 8px">Company</h4>
        <a href="/about">About</a>
        <a href="/contact">Contact</a>
        <a href="/careers">Careers</a>
      </div>

      <div>
        <h4 style="margin:0 0 8px">Connect</h4>
        <a href="https://github.com/your-username" target="_blank" rel="noopener">GitHub</a>
        <a href="https://twitter.com/your-handle" target="_blank" rel="noopener">Twitter</a>
        <a href="mailto:example@email.com">Email</a>
      </div>
    </div>

    <div style="margin-top:14px;color:var(--muted);font-size:13px">© <span id="year"></span> CiphAnon Studios — All rights reserved.</div>
  </div>
</footer>

<!-- Modal -->
<div id="modalBackdrop" class="modal-backdrop" role="dialog" aria-modal="true" aria-hidden="true">
  <div class="modal" role="document" aria-labelledby="modalTitle">
    <button id="modalClose" class="btn secondary" style="float:right">Close</button>
    <h3 id="modalTitle"></h3>
    <p id="modalDesc" style="color:var(--muted)"></p>
    <div id="modalDetails" style="margin-top:10px;color:var(--muted)"></div>
  </div>
</div>

<script>
/* ============================
 Performance-minded JS
 - requestAnimationFrame throttling
 - IntersectionObserver reveals
 - lazy image handling
 - prefers-reduced-motion respected
 ============================ */

/* set year */
document.getElementById('year').textContent = new Date().getFullYear();

/* Reveal sections */
const io = new IntersectionObserver((entries)=>{
  for (const e of entries) {
    if (e.isIntersecting) { e.target.classList.add('show'); io.unobserve(e.target); }
  }
}, { threshold: 0.12 });
document.querySelectorAll('.reveal').forEach(el => io.observe(el));

/* Parallax for hero character: rAF throttled */
(function(){
  const scene = document.querySelector('.hero-frame');
  const char = document.getElementById('charWrap');
  if(!scene || !char) return;
  let raf = null, last = {x:0,y:0};
  function onMove(e){
    const clientX = e.touches ? e.touches[0].clientX : e.clientX;
    const clientY = e.touches ? e.touches[0].clientY : e.clientY;
    const r = scene.getBoundingClientRect();
    const dx = (clientX - (r.left + r.width/2)) / (r.width || 1);
    const dy = (clientY - (r.top + r.height/2)) / (r.height || 1);
    last.x = dx; last.y = dy;
    if(raf === null){
      raf = requestAnimationFrame(()=> {
        const tx = last.x * 14;
        const ty = last.y * 10;
        char.style.transform = `translate3d(${tx}px, ${ty}px, 0)`;
        raf = null;
      });
    }
  }
  scene.addEventListener('mousemove', onMove, {passive:true});
  scene.addEventListener('touchmove', onMove, {passive:true});
  scene.addEventListener('mouseleave', ()=> char.style.transform = '', {passive:true});
  // disable on narrow screens
  function check(){ if(window.innerWidth < 720){ scene.removeEventListener('mousemove', onMove); scene.removeEventListener('touchmove', onMove); } }
  check();
  window.addEventListener('resize', check, {passive:true});
})();

/* Counters triggered when hero visible */
(function counters(){
  const hero = document.querySelector('.hero');
  if(!hero) return;
  const ob = new IntersectionObserver((entries)=>{
    for(const e of entries){
      if(e.isIntersecting){
        animateNumber('countAnim', 1); // placeholder - not used
        animateNum('countAnim2', 1);
        // three simple counters:
        runCount('countYears', 3);
        runCount('countLangs', 9);
        runCount('countProjects', 12);
        ob.disconnect();
      }
    }
  }, {threshold:0.3});
  ob.observe(hero);

  function runCount(id,to){
    // find counter element by mapping ids to elements above
    const map = { 'countYears':'cnt1', 'countLangs':'cnt2', 'countProjects':'cnt3' };
    const el = document.getElementById(map[id]||id);
    if(!el) return;
    let start = null;
    const duration = 900;
    function step(ts){
      if(!start) start = ts;
      const p = Math.min(1, (ts - start) / duration);
      el.textContent = Math.floor(p * to);
      if(p < 1) requestAnimationFrame(step);
      else el.textContent = to;
    }
    requestAnimationFrame(step);
  }
})();

/* Carousel controls + keyboard */
(function carousel(){
  const carousel = document.querySelector('.carousel');
  const prev = document.getElementById('prevProj');
  const next = document.getElementById('nextProj');
  if(!carousel) return;
  function scrollByOffset(offset){ carousel.scrollBy({ left: offset, behavior:'smooth' }); }
  prev && prev.addEventListener('click', ()=> scrollByOffset(-340));
  next && next.addEventListener('click', ()=> scrollByOffset(340));
  carousel.addEventListener('keydown', (e)=>{
    if(e.key === 'ArrowRight'){ scrollByOffset(340); e.preventDefault(); }
    if(e.key === 'ArrowLeft'){ scrollByOffset(-340); e.preventDefault(); }
  });
})();

/* Project modal previews */
(function projectModal(){
  const modalBackdrop = document.getElementById('modalBackdrop');
  const modalTitle = document.getElementById('modalTitle');
  const modalDesc = document.getElementById('modalDesc');
  const modalDetails = document.getElementById('modalDetails');
  const modalClose = document.getElementById('modalClose');

  function open(data){
    modalTitle.textContent = data.title || '';
    modalDesc.textContent = data.desc || '';
    modalDetails.textContent = data.details || '';
    modalBackdrop.style.display = 'flex';
    modalBackdrop.setAttribute('aria-hidden','false');
    modalClose.focus();
  }
  function close(){ modalBackdrop.style.display = 'none'; modalBackdrop.setAttribute('aria-hidden','true'); }

  modalClose && modalClose.addEventListener('click', close);
  modalBackdrop && modalBackdrop.addEventListener('click', (e)=> { if(e.target === modalBackdrop) close(); });

  document.querySelectorAll('.project').forEach(p=>{
    p.addEventListener('click', ()=>{
      const raw = p.getAttribute('data-proj');
      try{ const data = JSON.parse(raw); open(data); }catch(e){}
    });
    p.addEventListener('keydown', (e)=> { if(e.key === 'Enter' || e.key === ' ') { p.click(); e.preventDefault(); } });
  });
})();

/* Testimonials auto-scroll but cheap: rAF + pause on hover */
(function testimonialsTicker(){
  const el = document.querySelector('.testimonials');
  if(!el) return;
  let pos = 0, last = performance.now(), running = true;
  function tick(ts){
    if(!running) { last = ts; requestAnimationFrame(tick); return; }
    const dt = ts - last; last = ts;
    pos += dt * 0.02; // speed
    if(pos > el.scrollWidth - el.clientWidth) pos = 0;
    el.scrollLeft = pos;
    requestAnimationFrame(tick);
  }
  el.addEventListener('mouseenter', ()=> running = false, {passive:true});
  el.addEventListener('mouseleave', ()=> running = true, {passive:true});
  if(!window.matchMedia('(prefers-reduced-motion: reduce)').matches) requestAnimationFrame(tick);
})();

/* Gallery hover parallax (rAF throttled) */
(function galleryParallax(){
  const cards = document.querySelectorAll('.g-card');
  cards.forEach(card=>{
    let raf = null;
    function onMove(e){
      const rect = card.getBoundingClientRect();
      const cx = rect.left + rect.width/2;
      const cy = rect.top + rect.height/2;
      const clientX = e.touches ? e.touches[0].clientX : e.clientX;
      const clientY = e.touches ? e.touches[0].clientY : e.clientY;
      const dx = (clientX - cx) / (rect.width/2);
      const dy = (clientY - cy) / (rect.height/2);
      if(raf) cancelAnimationFrame(raf);
      raf = requestAnimationFrame(()=> {
        const img = card.querySelector('.g-thumb');
        img.style.transform = `translate3d(${dx*6}px, ${dy*-6}px, 0) scale(1.02)`;
      });
    }
    function reset(){ const img = card.querySelector('.g-thumb'); if(img) img.style.transform = ''; }
    card.addEventListener('mousemove', onMove, {passive:true});
    card.addEventListener('touchmove', onMove, {passive:true});
    card.addEventListener('mouseleave', reset, {passive:true});
    card.addEventListener('touchend', reset, {passive:true});
  });
})();

/* Marquee: pause on hover */
(function marquee(){
  const marq = document.querySelector('.marquee');
  if(!marq) return;
  marq.addEventListener('mouseenter', ()=> { const inr = marq.querySelector('.marquee-inner'); if(inr) inr.style.animationPlayState='paused'; }, {passive:true});
  marq.addEventListener('mouseleave', ()=> { const inr = marq.querySelector('.marquee-inner'); if(inr) inr.style.animationPlayState='running'; }, {passive:true});
})();

/* FAQ accordion */
document.querySelectorAll('.faq-head').forEach(head=>{
  const body = head.nextElementSibling;
  head.addEventListener('click', ()=> {
    const open = body.style.display === 'block' || body.style.display === '';
    // close all
    document.querySelectorAll('.faq-body').forEach(b => b.style.display = 'none');
    if(!open) body.style.display = 'block';
  });
  head.addEventListener('keydown', (e)=> { if(e.key === 'Enter' || e.key === ' ') { head.click(); e.preventDefault(); }});
});

/* Newsletter demo */
function subscribe(){
  const email = document.getElementById('email');
  const msg = document.getElementById('newsMsg');
  if(!email || !email.value){ msg.textContent = 'Enter an email'; return; }
  msg.textContent = 'Thanks — demo subscription saved (replace with real API).';
  setTimeout(()=> msg.textContent = '', 4000);
}

/* Accessibility: keyboard focus outlines show only when keyboard used */
(function focusOutline(){
  function handleFirstTab(e){
    if(e.key === 'Tab') document.body.classList.add('show-focus');
  }
  window.addEventListener('keydown', handleFirstTab, {once:true});
})();

/* Respect reduced-motion: stop heavy rAF loops already guarded above */

/* lazy image fallback: do nothing here because using loading="lazy" in markup */

</script>
</body>
</html>
